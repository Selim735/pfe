generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id                            BigInt    @id @default(autoincrement())
  email                         String    @unique
  passwordHash                  String
  firstName                     String
  lastName                      String
  phone                         String?   
  avatarUrl                     String?   
  role                          Role      @default(USER)
  emailVerified                 Boolean   @default(false)
  verificationToken             String?   
  verificationTokenExpiresAt    DateTime? 
  resetPasswordToken            String?   
  resetPasswordTokenExpiresAt   DateTime? 
  createdAt                     DateTime  @default(now())
  updatedAt                     DateTime  @updatedAt
  lastLoginAt                   DateTime?
  isActive                      Boolean   @default(true)

  providerProfile               ProviderProfile?

  @@map("users")
}

model ProviderProfile {
  id                          BigInt     @id @default(autoincrement())
  userId                      BigInt     @unique
  businessName                String
  businessDescription         String?
  businessLogoUrl             String?
  businessLicenseNumber       String?
  businessLicenseVerified     Boolean    @default(false)
  businessAddress             String?
  businessLatitude            Decimal?   @db.Decimal(10, 8)
  businessLongitude           Decimal?   @db.Decimal(11, 8)
  businessPhone               String?
  businessEmail               String?
  businessWebsite             String?
  createdAt                   DateTime   @default(now())
  updatedAt                   DateTime   @updatedAt

  user                        User       @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("provider_profiles")
}

enum Role {
  USER
  PROVIDER
  ADMIN
}

model Category {
  id          BigInt   @id @default(autoincrement())
  name        String   @db.VarChar(100)
  description String?
  iconUrl     String?  @db.VarChar(255)
  isActive    Boolean  @default(true)
  createdAt   DateTime @default(now())

  @@map("categories")
}

